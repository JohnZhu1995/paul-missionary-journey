这两个系统的加入，直接让游戏从“保罗单打独斗”升华为“使徒团队协作”，并将**“历史影响力”**具象化了。

我建议通过**“槽位管理（Slot Management）”**的方式来整合这两个系统，这样既能保持 Kimi 编写代码的简洁性，又能提供极佳的策略深度。

---

## 1. 同工系统：团队与效能管理 (The Companion Ensemble)

同工不再是静态背景，而是你的**“行动倍增器”**。

### 👥 核心机制：任务分配

每个城市的回合开始时，你不仅要决定保罗做什么，还要给同工分配任务。

- **招募（历史锚点）：**
- **巴拿巴：** 初始同工。特性：【劝慰者】（提升全队士气恢复速度）。
- **西拉：** 在腓立比解锁。特性：【坚韧者】（降低逼迫带来的体力损耗）。
- **提摩太：** 在路司得（或第二城中段）解锁。特性：【忠心代笔者】（写信成本减半）。

- **任务类型（任务槽）：**
- **教导 (Teaching)：** 消耗同工体力，大幅提升当前城市“教会健康度”。
- **探访 (Visitation)：** 消耗同工体力，降低当前城市“逼迫指数”。
- **后勤 (Logistics)：** 消耗同工体力，增加“物资”产出（如织帐棚）。

- **士气与效率公式：**
- 如果同工士气 ：效率为 。
- 如果同工士气 ：有概率拒绝任务，甚至触发“分道扬镳”事件（如马可离开）。

---

## 2. 书信系统：跨越时空的治理 (The Epistle Legacy)

书信系统是连接“已过城市”和“未来结局”的桥梁。

### ✉️ 核心机制：书信合成与收集

- **触发时机：** 1. **被动触发：** 当之前城市的健康度跌破临界点，系统提示“收到来自加拉太的急信”。

2. **主动选择：** 在休息回合选择“撰写书信”。

- **书信内容决策：**
- **神学论证：** 提升教会健康度，但消耗极大体力。
- **生活问安：** 提升同工士气，维持现状。

- **后续影响：** \* 如果你在以弗所写了《哥林多前书》，当你到达下一站或结算时，会触发“哥林多教会悔改”的正面反馈，直接加算最终积分。
- **收集要素（The Canon）：**
- 界面上方有一个“新约书信架”，每写成一封（如《腓立比书》），图标亮起。收集完整书信集是达成“至死忠心”评价的隐藏条件。

---

## 3. 系统整合逻辑（给程序员 Kimi 的逻辑图）

我们要告诉 Kimi，这两个系统是相互关联的：

> **整合示例：**
> 你在以弗所感到压力巨大。你派 **西拉** 去处理**后勤**（保证物资），派 **提摩太** 协助你 **写信** 给腓立比教会（因为提摩太有代笔加成，体力消耗从 -20 降为 -10）。你自己则腾出精力去 **推喇奴学房教导**。

---

## 🛠️ 给 Kimi k2.5 的进阶开发指令

请将以下指令发送给 Kimi，让它在框架中预留位置：

> **Context:** 请在 `GameEngine` 中整合“同工”与“书信”系统：
> **1. Companion 类：** > \* 属性：`name`, `stamina`, `morale`, `specialty` (teaching/logistics/visitation)。
>
> - 方法：`assign_task(task_type)`。
>
> **2. Letter 系统：**
>
> - 建立 `EpistleCollection` 字典，记录：`{'Galatians': False, 'Philippians': False ...}`。
> - 实现 `write_letter(target_city)` 逻辑：若保罗与提摩太同时在队，写信的 `stamina` 消耗降低 50%。
>
> **3. 关联影响：**
>
> - 当玩家在“以弗所”写下《哥林多前书》后，全局变量 `corinth_status` 设为 `resolved`，这将在最终评分中折算为 500 分。
>
> **4. 请更新 main_loop：**
>
> - 每个回合开始时，循环显示当前队伍所有同工的状态。
> - 玩家输入从单纯的动作选择，变为：`[Paul Action] + [Companion A Action] + [Companion B Action]`。

---

### 💡 顾问的温馨提示（给 PM）：

1. **关于收集：** “收集完整新约书信”是一个非常强的**成就动机**。玩家为了点亮所有图标，会愿意多次游玩（二周目），尝试在不同的时机写信。
2. **关于士气：** 别忘了加入“历史性争执”。比如在特定回合，如果物资极低，可以强制触发“保罗与巴拿巴因马可争论”，这会让玩家感受到真实的人性张力。
3. **优化：**需要提高每个城市的回合数，以便在融合这么多系统后，使更好地体验游戏的可玩性，同时需要平衡各节点数值的计算，使游戏保持在game flow channel内
