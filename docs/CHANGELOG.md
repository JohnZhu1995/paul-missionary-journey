# 更新日志

## [2.1.0] - 2026-02-12

### Phase 1: 经文武器化重构

#### 新增
- **经文装备系统**：13段经文重构为12种属灵装备类型
  - 呼召、预备、权柄、审判、讲道、福音、观察、神迹、警戒、纠正、逼迫、复活、劝勉
  - 每段经文定义：装备类型、能力效果、适用场景、力量值、使用限制
  - 经文使用追踪系统（消耗型经文限制使用次数）

- **经文对决系统**：完全替换原有技能战斗
  - 玩家从收藏的经文中选择最适合的作为论据
  - 经文类型匹配敌人弱点造成1.5倍伤害
  - 无经文时只能凭自己回应（基础伤害低且消耗信念）
  - 卡片式经文选择UI，显示效果预览

- **城市民俗百科**：为7个城市添加深度信息
  - 福音饱和度字段 (gospel_saturation)
  - 城市特性：民性、敌对等级、宗教背景
  - 民俗百科：地理位置、风俗习惯、历史背景、宣教挑战

#### 改动
- 重构 `GameData.verses` 数据结构，添加装备属性
- 重构对决逻辑，移除技能按钮，改为经文选择
- 优化保存系统，新增 `verseUsage` 字段追踪经文使用
- UI优化：经文卡片显示类型图标、效果标签、剩余次数

#### 技术细节
- 动态难度算法保持：D = S + σ
- 保存系统兼容旧版本（自动迁移）
- 新增 `canUseVerse()`, `useVerse()`, `getAvailableVersesForScene()` 等函数

---

## [2.0.0] - 2026-02-12

### 核心玩法重构

#### 新增
- **资源管理系统**：
  - 信念(Faith)：生命值，归零触发禁食祷告
  - 供给(Supplies)：旅行消耗
  - 影响力(Influence)：解锁选项、应对事件

- **旅行事件系统**：城市间移动触发随机事件
  - 顺风顺水、小风浪、海上风暴、路遇强盗、船只失事
  - 动态概率算法：技能越高负面事件概率越低

- **属灵争战系统**（后被经文对决替换）：
  - 辩论、神迹、忍耐三个技能
  - 回合制战斗，消耗资源降低敌人阻力值

- **禁食祷告复活机制**：
  - Faith归零时触发
  - 三种任务类型：背诵经文、恒切祷告、安静等候
  - 完成后恢复50信念+10供给

- **动态难度算法**：D ≈ S + σ
  - 根据玩家技能等级动态调整敌人属性
  - 保持心流体验

#### 改动
- 重构 `GameState` 添加资源、技能、战斗状态字段
- 重构 `handleChoice` 添加旅行事件触发
- 更新保存系统支持新数据结构
- 地图界面添加资源条显示

---

## [1.0.0] - 初始版本

### 基础功能
- 地图系统：7个城市节点
- 场景系统：对话、经文搜索、记忆游戏、解谜、测验
- 经文收藏系统
- 本地存档
- PWA支持

---

## 版本号规则

- **主版本号**：重大重构（如玩法机制改变）
- **次版本号**：新增功能或系统
- **修订号**：Bug修复或优化

